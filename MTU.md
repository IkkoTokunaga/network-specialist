# mtu 
# MTU（Maximum Transmission Unit）
最大転送単位のこと
+ ケーブル
+ スイッチ
+ ルータ
+ NICハードウェア

すべてが 1500バイト を前提に設計されている。
そのためEthernetでは1500が設定されている

1500を超えるとどうなる？
（Don’t Fragment）
DF＝0 フラグメント（分割される）
DF＝1 破棄
IPv6の場合は常に破棄

現代の設定では常に破棄。これはFWやIDSにてセキュリティの関係(回避攻撃に使われやすい)で拒否されることがほとんどだから
pingは通るのにリクエストが通らないときはMTUの設定を確認してみる
## Path MTU Discovery（PMTUD）
+ 送信側が「DFビット（Don't Fragment）」を立てる
+ ルータでMTU超過
+ ルータは分割せず破棄
+ ICMPで「このリンクはこれが最大だよ」と返す
送信元で調整して、フラグメンテーションを起こさないような設計が必要
フラグメンテーションが発生すると極端に通信速度や処理不可が高くなる
## MSS（Maximum Segment Size）
アプリケーションレベル（セッション層～アプリケーション層）のデータサイズを表す
イーサネットフレームからIPヘッダーとTCPヘッダーを除いたものがMSSとなる
MSS＝MTU — TCP/IP

※どの本を見てもMTUが出てくるのでネットワークには欠かせない概念
MTUを理解することがネットワークを理解することの第一段階かもしれない
